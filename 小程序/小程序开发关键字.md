## 角色

- 第三方平台：微信开放平台下的第三方平台（简称第三方平台），它是某一种服务商
- 运营方：公众号或小程序运营者（简称运营者）
- 服务商：我们要做的就是服务商，分为定制型服务商和平台型服务商
- 商家：商家委托运营方管理自己的小程序

## 关键名词

- 权限集
- 全网发布
- 开发小程序
- 第三方小程序开发流程
- 用户身份（OpenID 和 UnionID）
- 服务器域名和业务域名
- 标准模板库和普通模板库

### 第三方平台

- 第三方平台给开发者使用，需要`运营方`授权
- 能力：调用`微信开放平台`接口，为运营者提供账号申请、小程序创建、技术开发、插件能力...等服务。
- 分类
  - 平台型：第三方平台在获得商家授权后，小程序托管到第三方模版库，一个模版发布多个小程序
  - 定制化型：获得商家的appid和secret完全定制化开发
- 平台型的授权方式：扫码，对`服务商`而言方便，对`商家`而言安全

### 权限集

- 定义： 一个或多个接口权限的集合
- 互斥：有些权限只可以给一个`第三方平台`，这样的权限称为互斥
- 没有权限会报“api is unauthorized to component”的错误，可以通过接口查看拥有的权限id
- 第三方平台权限集修改：有两个入口，一个是平台的修改【需要全网发布】，一个是单个服务商的修改【推荐】。

### 全网发布

- 开发者完成测试以后可以进行全网发布，审核通过后，第三方平台业务可以上线，向所有符合条件的公众号进行授权登录
- 业务已经上线可以继续修改开发测试的配置的地址，只要不全网发布就不影响其他人

## 小程序开发程序

###  开发小程序

- 开发小程序不是一个动词，不是指开发小程序这个动作，而是指服务商自己用于开发模版的小程序

### 第三方小程序开发流程

1. 微信公众平台申请一个普通小程序
2. 微信开放平台 -> 第三方平台 -> 将上面申请到的小程序添加为  **开发小程序 ** (具体添加的过程中需要该小程序公众平台的登录账号和密码)
3. 在微信开发者工具中正常开发小程序 -> 开发者工具中上传代码到草稿（草稿只可以有一个）-> 小程序模板库中 -> 调用接口为旗下授权的小程序进行部

#### 开发第三方小程序的一些概念

- 区别一些字段
  - open3rd: 第三方平台账号，第三方平台开发者账号
  - 3rdMiniProgramAppd：第三方平台用于开发的小程序模板
  - extAppid：授权给第三方平台的小程序
- 特殊能力：
  - 小程序模板结合extAppid 开发
  - 可以使用directCommit直接提交到待审核列表
  - 第三方云开发模式，可以直接获取第三方 component_access_token 无需搭建服务器可以快速调用平台接口

## 代注册小程序

#### 代注册小程序的三种方式

##### 复用公众号主体创建

- 一个公众号每个月可以服用资质注册5个小程序
- 代注册小程序的步骤
  1. 准备权限
  2. 使用注册接口创建小程序
  3. 使用小程序账号信息设置接口补充小程序信息
- 流程
  - 第三方平台页面发起，题哦啊转到微信公众平台指定授权注册页面
  - 公众号管理员扫码确认复用公众号资质快速注册小程序
  - 管理员扫码验证通过后跳转至第三方平台页面，微信将注册结果返回给第三方平台。
- [复用公众号主体快速注册小程序API](https://developers.weixin.qq.com/doc/oplatform/Third-party_Platforms/2.0/api/Register_Mini_Programs/fast_registration_of_mini_program.html)
  - 从第三方平台跳转至微信公众平台授权注册页面
  - 快速注册
  - 换绑小程序管理员接口

##### 快速创建小程序

- 以下均指`企业小程序`

- 没有已认证公众号，需要企业法人进行人脸识别完成认证

- 人脸识别需要法人姓名、法人微信、企业名称、企业代码信息
- 文档推荐下发模板消息来采集法人人脸信息，完成注册认证，注册完成后下发appid， 下发模板消息给法人 提示设置邮箱和密码
- 通过接口创建的小程序默认“已认证” 无需交 300 元认证费
- 代注册小程序的步骤
   	1. 准备权限集
   	2. 手机法人和企业信息
   	3. 核实信息，企业-工信部备案相同，法人姓名要和绑定微信银行卡信吗一致，否则接口无法调用成功
   	4. 调用接口注册小程序
   	5. 人脸识别认证，认证成功后（第三方平台的**通过授权时间接收URL接收信息** 会收到创建appid信息）
   	6. 代上架进行小程序开发
 - [快速注册企业小程序API](https://developers.weixin.qq.com/doc/oplatform/Third-party_Platforms/2.0/api/Register_Mini_Programs/Fast_Registration_Interface_document.html)
   - 创建小程序
   - 查询创建任务状态
   - 注册审核事件推送

##### 创建14天试用小程序

- 支持公众号主体和法人人脸识别认证

#### 小程序服务商组件

- 小程序的服务商组件是微信官方为小程序第三方服务商开放的组件，使第三方的小程序拥有试用小程序授权、试用小程序跳转等功能。
- 适用小程序：该小程序与服务商的第三方平台账号绑定在同一个开放平台账号下

#### 注意事项

- 类目必须符合微信小程序提供的[类目](https://docs.qq.com/sheet/DVnpOUlJZZGJaSUVY?tab=BB08J2)
- 人脸验证必须在24小时内完成
- 正确引导获取微信号“微信”-“我”，不能使用手机号 QQ号，确保微信号主任和微信支付绑定的银行卡主人姓名一致

## 用户身份（OpenID 和 UnionID）

- OpenID 同一个用户在不同的公众号和小程序下OpenID是相同的
- 同一个用户对于同一个微信开放平台

### 服务器域名和业务域名新··x

- 服务器域名可以添加1000个业务域名可以添加100个

### 标准模板库和普通模板库

- 标准模板库ext_json参数仅为{"extAppid":'', "ext": {}, "window": {}}
- 普通模板库ext_json可配置的参数比较多
- 标准模板库的代码模板过审以后不需要人工审核，可以提高发布效率，可授权托管给微信服务平台进行售卖

看看有没有接口拿： 获取APP_id 